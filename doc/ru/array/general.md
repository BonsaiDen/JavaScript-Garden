## ﻿﻿ Перебор массивов и свойств объектов

Несмотря на то, что массивы в JavaScript являются объектами, достаточных оснований использовать [цикл `for in`](#object.forinloop) для перебора элементов массива **не существует**. Наоборот, существует достаточно хороших причин **против** использования `for in` с массивами.

> **Замечание:** Массивы в JavaScript **не** являются *ассоциативными массивами*. Для связывания ключей и значений в JavaScript есть только [объекты](#object.general). При этом, ассоциативные массивы априори **сохраняют** заданный порядок свойств, объекты же **не** делают этого.

Поскольку во время выполнения `for in` циклически перебираются все свойства объекта, находящиеся в его цепочке прототипов, а единственный способ исключить ненужные свойства — использовать [`hasOwnProperty`](#object.hasownproperty) — в действии такой цикл **до 20 раз** медленнее обычного цикла `for`.

### Итерирование

Для достижения лучшей производительности при переборе массивов, лучше всего использовать обычный цикл `for`.

    var list = [1, 2, 3, 4, 5, ...... 100000000];
    for(var i = 0, l = list.length; i < l; i++) {
        console.log(list[i]);
    }

В примере выше есть один дополнительный приём, с помощью которого кэшируется величина длины массива: `l = list.length`.

Несмотря на то, что свойство `length` определено в самом массиве, поиск этого свойства в объекте накладывает дополнительные расходы на каждой итерации цикла. Пусть в этом случае новые движки JavaScript и **могут** теоретически применить оптимизацию, всё же нет способа точно предугадать, будет оптимизирован код на новом движке или нет.

Фактически, цикл без кэширования может выполняться в **два раза медленнее**, нежели цикл с кэшированной длиной.

### Свойство `length`

Хотя *геттер* свойства `length` всего лишь возвращает количество элементов содержащихся в массиве, *сеттер* оказывается удобно использовать для **урезания** массивов.

    var foo = [1, 2, 3, 4, 5, 6];
    foo.length = 3;
    foo; // [1, 2, 3]

    foo.length = 6;
    foo; // [1, 2, 3]

Присвоение свойству `length` меньшей величины урезает массив, однако присвоение большего значения не производит никакого эффекта.

### Заключение

Для оптимальной работы кода рекомендуется всегда использовать простой цикл `for` и кэшировать свойство `length`. Использование `for in` с массивами является признаком плохого кода, содержащего потенциальные ошибки, а также приводит к низкой скорости его выполнения.

