## Цыкл `for in`

Як і аператар `in`, цыкл `for in` праходзіць па ўсім ланцужку прататыпаў
пры ітэрацыі па ўласцівасцях аб'екта.

> **Заўвага:** Цыкл `for in` **не** ітэруе па уласцівасцях, у якіх атрыбут
> `enumerable` мае значэнне `false`; напрыклад, уласцівасць `length`
> масіва (Array).

    // Атруцім Object.prototype
    Object.prototype.bar = 1;

    var foo = {moo: 2};
    for(var i in foo) {
        console.log(i); // вывядзе і bar і moo
    }

Праз тое, што немагчыма памяняць паводзіны самаго цыкла `for in`, неабходна фільтраваць
непажаданыя ўласцівасці аб'екта ўнутры цыкла. У версіях ECMAScript 3 і пазней,
гэта можна зрабіць праз метад [`hasOwnProperty`](#object.hasownproperty).

Пачынаючы з ECMAScript 5, `Object.defineProperty` можа быць выкарыстана з
`enumerable` роўным `false`, каб дадаць уласцівасці аб'екту такім чынам, што яны
не будуць пералічаны. У такім выпадку было б справядлівым меркаваць, што любая
`enumerable` уласціваць была дададзена адмыслова і прапусціць `hasOwnProperty`, бо
гэта робіць код больш шматслоўным і цяжэйшым для чытання. У бібліятэчным кодзе
`hasOwnProperty` мае быць усё роўна выкарыстаны, бо не варта рабіць здагадкі аб
тым, якія `enumerable` уласцівасці могуць пражываць у ланцужку прататыпаў.

> **Заўвага:** праз тое, што `for in` заўсёды праходзіць праз увесць ланцужок прататыпаў,
> ён будзе працаваць усё марудней з кожным новым слоем спадкаемства.

### Выкарыстоўванне `hasOwnProperty` для фільтрацыі

    // возьмем foo з прыкладу
    for(var i in foo) {
        if (foo.hasOwnProperty(i)) {
            console.log(i);
        }
    }

Гэта адзіная правільная версія выкарыстоўвання цыкла. Дзякуючы выкарыстоўванню
`hasOwnProperty`, быдзе выведзена **толькі** `moo`.
Калі прыбраць `hasOwnProperty`, код будзе схільны да памылак у выпадку, калі
натыўныя прататыпы — напрыклад, `Object.prototype` — былі змененыя.

У новых версіях ECMAScript уласцівасці, пазначаныя як не enumerable, могуць быць
вызначыныя праз `Object.defineProperty`, змяншаючы рызыку ітэрацыі праз іх без
выкарыстання `hasOwnProperty`. Тым не менш, трэба быць уважлівым пры выкарыстанні
старых бібліятэк, такіх як [Prototype][1], якая не выкарыстроўвае новымя магчымасці
ECMAScript.
Пры выкарыстоўванні гэтай бібліятэкі, цыклы `for in`, якія не выкарыстоўваюць
`hasOwnProperty`, гарантавана не будуць працаваць.

### У заключэнне

Рэкамендавана **заўсёды** выкарыстоўваць `hasOwnProperty` як у ECMAScript 3 або
ніжэй, так і ў бібліятэчным кодзе. У гэтых асяродках ніколі не варта рабіць
здагадкі аб тым, быў зменены натыўны прататып ці не. Пачынаючы з ECMAScript 5,
`Object.defineProperty` дазваляе пазначаць уласцівасці як не `enumerable` і прапускаць
выкарыстоўванне `hasOwnProperty` у кодзе праграмы.

[1]: http://www.prototypejs.org/
